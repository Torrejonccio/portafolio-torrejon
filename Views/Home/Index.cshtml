@{
    ViewData["Title"] = "Torrejón Services";
}

<section id="inicio" class="text-center py-5">
    <div class="container">
        <img src="~/images/logo.jpg" class="rounded-square mb-3" alt="yo ese">
        <h1 class="display-4 fw-bold">Matías Torrejón Rivera</h1>
        <p class="lead text-muted">Proveedor de <del>cariño</del> soluciones </p>
        <p class="mt-4">
            Proveo apps web de servicios para optimizar, mejorar, y sacarle el máximo provecho a tu negocio !!<br>Servicios especializados en sistemas de gestión interna/externa, portales varios de clientes y automatización de procesos !!
            <br>Portales y sistemas visualmente agradables, intuitivos, y muy simples de utilizar !!  
        </p>
        <a href="#contacto" class="btn btn-primary btn-lg mt-3">Contáctame (xfa)</a>
    </div>
</section>

<section id="servicios" class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Mis servicios disponibles:</h2>
            <p class="text-muted">Blablablabla para potenciar tu negocio (???)</p>
        </div>

        <div class="row g-4 justify-content-center">
            
            <!-- TARJETA ACTIVOS -->
            <div class="col-md-6 col-lg-4 d-flex align-items-stretch">
                <div class="card service-card h-100">
                    <div class="card-body">
                        <div class="icon-circle bg-primary-soft mb-3">
                            <i class="bi bi-geo-alt-fill text-primary"></i>
                        </div>
                        <h5 class="card-title fw-bold">Gestión y seguimiento de activos</h5>
                        <p class="card-text">Tendrás control total sobre tus activos físicos!!, monitoreando su ubicación, estado, asignación, etc, todo en tiempo real a través de un mapa interactivo, paneles, filtros, fotos, etc.</p>
                        <a href="https://i.pinimg.com/736x/e2/2e/d7/e22ed703e78f3603b493db8b72f9692b.jpg" class="btn btn-outline-primary mt-auto" target="_blank">Ver *(demo/link/endpoint/nose)</a>
                    </div>
                </div>
            </div>

            <!-- TARJETA PROYECTOS -->
            <div class="col-md-6 col-lg-4 d-flex align-items-stretch">
                <div class="card service-card h-100">
                    <div class="card-body">
                        <div class="icon-circle bg-primary-soft mb-3">
                            <i class="bi bi-kanban-fill text-primary"></i>
                        </div>
                        <h5 class="card-title fw-bold">Portal de gestión de proyectos *(industriales/internos/nose)</h5>
                        <p class="card-text">Podrás administrar proyectos!!, organizando tareas, asignando responsabilidades y monitoriarando el progreso de estos con un portal centralizado y simple de usar para todo tu equipo</p>
                        <a href="https://i.pinimg.com/736x/e2/2e/d7/e22ed703e78f3603b493db8b72f9692b.jpg" class="btn btn-outline-primary mt-auto" target="_blank">Ver *(demo/link/endpoint/nose)</a>
                    </div>
                </div>
            </div>
            
            <!-- TARJETA INVENTARIO -->
            <div class="col-md-6 col-lg-4 d-flex align-items-stretch">
                <div class="card service-card h-100">
                    <div class="card-body">
                        <div class="icon-circle bg-primary-soft mb-3">
                            <i class="bi bi-box-seam-fill text-primary"></i>
                        </div>
                        <h5 class="card-title fw-bold">Sistema de inventario/stock</h5>
                        <p class="card-text">Digitaliza tu bodega!!, controla el stock, gestiona entradas o salidas de productos, visualiza el comportamiento del/los producto(s) que quieras mediante gráficos y métricas sencillas de entender, y genera reportes para optimizar tus niveles de inventario</p>
                         <a href="https://i.pinimg.com/736x/e2/2e/d7/e22ed703e78f3603b493db8b72f9692b.jpg" class="btn btn-outline-primary mt-auto" target="_blank">Ver *(demo/link/endpoint/nose)</a>
                    </div>
                </div>
            </div>

<!-- 
            TARJETA ANALISIS
            <div class="col-md-6 col-lg-4 d-flex align-items-stretch">
                <div class="card service-card h-100">
                    <div class="card-body">
                        <div class="icon-circle bg-primary-soft mb-3">
                            <i class="bi bi-bar-chart-line-fill text-primary"></i>
                        </div>
                        <h5 class="card-title fw-bold">Análisis de datos (BI??)</h5>
                        <p class="card-text">Convierte tus datos en decisiones !!, utiliza dashboards/paneles de control interactivos para visualizar tus KPIs y encontrar puntos de mejora</p>
                        <a href="#" class="btn btn-outline-secondary mt-auto disabled">PROXIMAMENTE??</a> <!-- never forget 'disabled' - ->
                    </div>
                </div>
            </div>
-->
        </div>
    </div>
</section>

<!-- SECCIÓN YO -->
<section id="sobre-mi" class="py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6 text-center">
                <img src="~/images/IMG_3749.png" class="img-fluid rounded-3" alt="Yo de nuevo??">
            </div>
            <div class="col-md-6">
                <h2 class="fw-bold mb-3">&larr; Sobre este increíble tipo:</h2>
                <p class="text-muted"> Soy estudiante de 5to año de <b>Ingeniería Civil Informática</b> en la <b>Universidad Técnica Federico Santa María, campus San Joaquín</b>. A lo largo de mi formación he adquirido conocimientos en <b>planificación estratégica</b>, <b>automatización de procesos</b>, <b>consultoría tecnológica</b> y <b>desarrollo de software</b>.
Me interesa la gestión de soluciones tecnológicas adaptadas a distintas necesidades, particularmente a través de un enfoque <b>integral</b>, abarcando problemas de manera completa y considerando todos los factores involucrados para lograr el cumplimiento de <b>objetivos de negocio</b>.
<br>
Tengo experiencia en la <b>ejecución de proyectos</b> en entornos industriales y empresariales, desarrollando soluciones en <b>automatización, monitoreo y control de datos</b>. También he realizado <b>consultoría tecnológica a PYMEs</b>, apoyando la integración de <b>herramientas tecnológicas</b> en sus operaciones.
</p>
                <h5 class="fw-bold mt-4">Objetivo</h5>
                <del>Mi objetivo actual es intentar borrar a ese caballero asomado sobre <b>mi</b> hombro derecho</del>
                <p>Busco ayudar a las personas y pequeñas/medianas empresas simplificando, optimizando y automatizando las operaciones de su negocio, potenciando este a través de tecnologías robustas y adaptadas a sus propias necesidades.
                <br> Mi prioridad es lograr que las soluciones y herramientas entregadas sean tan efectivas como sencillas de utilizar. El enfoque siempre será proveer la mejor experiencia de usuario</p>
            </div>
        </div>
    </div>
</section>

<!-- SECCIÓN DE CONTACTO -->
<section id="contacto" class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">Comunícame</h2>
            <p class="text-muted">¿Tienes dudas, sugerencias o buscas cotizar? Conversemos !!</p>
            <p style="font-size: 10px;">Pero no mucho porque este formulario no funciona.........</p>
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <form action="UrlQueNoExiste" method="POST">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="nombre" placeholder="t" required>
                        <label for="nombre">Nombre</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="email" class="form-control" id="email" placeholder="t" required>
                        <label for="email">Email</label>
                    </div>
                    <div class="form-floating mb-3">
                        <textarea class="form-control" placeholder="" id="mensaje" style="height: 150px" required></textarea>
                        <label for="mensaje">Escriba su <del>declaración de amor incondicional</del> mensaje aquí</label>
                    </div>
                    <div class="d-grid">
                        <button class="btn btn-primary btn-lg" type="submit"><del>Intentar</del> Enviar mensaje</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>


<!-- SECCIÓN DE RASPE -->
<section id="a" class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-bold">RASPA Y GANA... MI WHATSAPP Y CORREO !!!</h2>
            <p class="text-muted">No sé que más colocar así que toma un jueguito:<br>Raspa los cuadrados y encuentra los pares de íconos para revelar la información !!</p>
            EVITA LAS SEÑALES DE PELIGRO <i class="bi bi-exclamation-triangle-fill"></i>, SI ACUMULAS 2 PIERDES
        </div>

        <!-- Contenedor para los resultados -->
        <div id="results-container" class="results-container text-center mb-4">
            <div id="whatsapp-result" class="result-item"></div>
            <div id="email-result" class="result-item"></div>
        </div>

        <!-- La tarjeta de raspe -->
        <div class="scratch-card-container">
            <div class="scratch-card">
                <div id="scratch-grid" class="scratch-grid">
                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="loseModal" tabindex="-1" aria-labelledby="loseModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
            <div class="modal-body">
                <h1 id="countdown" class="display-1 fw-bold"></h1>
                <div id="lose-result" class="d-none">
                    <h2 class="fw-bold">PERDISTE</h2>
                    <img src="~/images/bola.png" class="img-fluid rounded-square my-3" alt="Perdiste">
                </div>
                <button id="retry-button" class="btn btn-primary btn-lg mt-3 d-none">Reintentar</button>
            </div>
        </div>
    </div>
</div>


@section Scripts {
<script>
document.addEventListener('DOMContentLoaded', function () {
    const grid = document.getElementById('scratch-grid');
    const whatsappResult = document.getElementById('whatsapp-result');
    const emailResult = document.getElementById('email-result');
    const loseModal = new bootstrap.Modal(document.getElementById('loseModal'));
    const countdownElement = document.getElementById('countdown');
    const loseResultElement = document.getElementById('lose-result');
    const retryButton = document.getElementById('retry-button');

    let revealedItems = { 'whatsapp': 0, 'email': 0, 'bomb': 0 };
    let gameActive = true;
    let revealedCanvases = new Set();

    // --- Lógica del Juego ---
    function setupGame() {
        grid.innerHTML = '';
        whatsappResult.innerHTML = '';
        emailResult.innerHTML = '';
        whatsappResult.classList.remove('won');
        emailResult.classList.remove('won');
        revealedItems = { 'whatsapp': 0, 'email': 0, 'bomb': 0 };
        gameActive = true;
        revealedCanvases.clear();
        
        const items = [
            { type: 'whatsapp', icon: 'bi-whatsapp', color: '#25D366' }, { type: 'whatsapp', icon: 'bi-whatsapp', color: '#25D366' },
            { type: 'email', icon: 'bi-envelope-fill', color: '#EA4335' }, { type: 'email', icon: 'bi-envelope-fill', color: '#EA4335' },
            { type: 'bomb', icon: 'bi-exclamation-triangle-fill', color: '#343a40' }, { type: 'bomb', icon: 'bi-exclamation-triangle-fill', color: '#343a40' },
            { type: 'bomb', icon: 'bi-exclamation-triangle-fill', color: '#343a40' }, { type: 'bomb', icon: 'bi-exclamation-triangle-fill', color: '#343a40' },
            { type: 'bomb', icon: 'bi-exclamation-triangle-fill', color: '#343a40' }
        ];

        items.sort(() => Math.random() - 0.5);

        for (let i = 0; i < 9; i++) {
            const gridItem = document.createElement('div');
            gridItem.className = 'grid-item';

            const itemData = items[i];
            
            const iconElement = document.createElement('i');
            iconElement.className = `bi ${itemData.icon}`;
            iconElement.style.color = itemData.color;
            gridItem.appendChild(iconElement);
            gridItem.dataset.type = itemData.type;

            const canvas = document.createElement('canvas');
            setupCanvas(canvas, gridItem);
            grid.appendChild(gridItem);
        }
    }

    function setupCanvas(canvas, parent) {
        parent.appendChild(canvas);
        const ctx = canvas.getContext('2d');
        
        setTimeout(() => {
            canvas.width = parent.offsetWidth;
            canvas.height = parent.offsetHeight;

            ctx.fillStyle = '#adb5bd';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }, 0);
        
        let isDrawing = false;

        function scratch(e) {
            if (!isDrawing || !gameActive || revealedCanvases.has(canvas)) return;
            
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left;
            const y = (e.clientY || e.touches[0].clientY) - rect.top;

            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath();
            ctx.arc(x, y, 20, 0, Math.PI * 2, false);
            ctx.fill();
        }

        function checkScratchAmount() {
             if (revealedCanvases.has(canvas)) return;
             const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
             const pixels = imageData.data;
             let transparentPixels = 0;
             for (let i = 3; i < pixels.length; i += 4) {
                 if (pixels[i] === 0) {
                     transparentPixels++;
                 }
             }
             const transparentPercentage = (transparentPixels / (canvas.width * canvas.height)) * 100;
             
             if (transparentPercentage > 40) {
                 revealedCanvases.add(canvas);
                 canvas.style.opacity = '0';
                 checkGameLogic(parent.dataset.type);
             }
        }
        
        canvas.addEventListener('mousedown', (e) => { isDrawing = true; scratch(e); });
        canvas.addEventListener('touchstart', (e) => { isDrawing = true; scratch(e); });

        canvas.addEventListener('mouseup', () => { isDrawing = false; checkScratchAmount(); });
        canvas.addEventListener('touchend', () => { isDrawing = false; checkScratchAmount(); });

        canvas.addEventListener('mousemove', scratch);
        canvas.addEventListener('touchmove', scratch);
        canvas.addEventListener('mouseleave', () => { isDrawing = false; checkScratchAmount(); });
    }
    
    function checkGameLogic(type) {
        if (!gameActive) return;

        revealedItems[type]++;

        if (type === 'whatsapp' && revealedItems.whatsapp === 2) {
            winGame('whatsapp');
        } else if (type === 'email' && revealedItems.email === 2) {
            winGame('email');
        } else if (type === 'bomb' && revealedItems.bomb === 2) {
            loseGame();
        }
    }
    
    function winGame(type) {
        if (type === 'whatsapp') {
            whatsappResult.innerHTML = `<i class="bi bi-whatsapp"></i> <strong>+56 9 5014 6005</strong>`;
            whatsappResult.classList.add('won');
        } else if (type === 'email') {
            emailResult.innerHTML = `<i class="bi bi-envelope-fill"></i> <strong>matiast.r@hotmail.com</strong>`;
            emailResult.classList.add('won');
        }
        
        if(revealedItems.whatsapp === 2 && revealedItems.email === 2){
            gameActive = false;
        }
    }

    function loseGame() {
        gameActive = false;
        countdownElement.classList.remove('d-none');
        loseResultElement.classList.add('d-none');
        retryButton.classList.add('d-none');
        countdownElement.textContent = '3';
        loseModal.show();
        
        let count = 3;
        const interval = setInterval(() => {
            count--;
            if (count > 0) {
                countdownElement.textContent = count;
            } else {
                clearInterval(interval);
                countdownElement.classList.add('d-none');
                loseResultElement.classList.remove('d-none');
                retryButton.classList.remove('d-none');
            }
        }, 1000);
    }

    retryButton.addEventListener('click', () => {
        loseModal.hide();
        setupGame();
    });

    setupGame();
});
</script>
}